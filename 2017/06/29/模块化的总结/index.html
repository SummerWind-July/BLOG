<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>模块化的总结 | blog of lilong</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="模块化CommonJSjs代码的模块化标准，不适用于前端开发，NodeJS在使用该标准实现模块化 AMDAsync Module Definition 异步模块定义 尽可能早的加载所有需要用到的模块，模块的加载都是异步的，如果要在模块加载完成后，利用模块中的内容实现某些功能，需要将代码写在 require的第二个参数的回调函数中12345678	//正确的写法	require([&quot;views/as">
<meta name="keywords" content="javascript,module">
<meta property="og:type" content="article">
<meta property="og:title" content="模块化的总结">
<meta property="og:url" content="http://yoursite.com/2017/06/29/模块化的总结/index.html">
<meta property="og:site_name" content="blog of lilong">
<meta property="og:description" content="模块化CommonJSjs代码的模块化标准，不适用于前端开发，NodeJS在使用该标准实现模块化 AMDAsync Module Definition 异步模块定义 尽可能早的加载所有需要用到的模块，模块的加载都是异步的，如果要在模块加载完成后，利用模块中的内容实现某些功能，需要将代码写在 require的第二个参数的回调函数中12345678	//正确的写法	require([&quot;views/as">
<meta property="og:updated_time" content="2017-07-07T04:41:43.281Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="模块化的总结">
<meta name="twitter:description" content="模块化CommonJSjs代码的模块化标准，不适用于前端开发，NodeJS在使用该标准实现模块化 AMDAsync Module Definition 异步模块定义 尽可能早的加载所有需要用到的模块，模块的加载都是异步的，如果要在模块加载完成后，利用模块中的内容实现某些功能，需要将代码写在 require的第二个参数的回调函数中12345678	//正确的写法	require([&quot;views/as">
  
    <link rel="alternate" href="/atom.xml" title="blog of lilong" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">blog of lilong</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-模块化的总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/29/模块化的总结/" class="article-date">
  <time datetime="2017-06-29T12:54:54.000Z" itemprop="datePublished">2017-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>►<a class="article-category-link" href="/categories/web/frontend/">frontend</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      模块化的总结
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><h3 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h3><p>js代码的模块化标准，不适用于前端开发，NodeJS在使用该标准实现模块化</p>
<h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><p>Async Module Definition 异步模块定义</p>
<p>尽可能早的加载所有需要用到的模块，模块的加载都是异步的，如果要在模块加载完成后，利用模块中的内容实现某些功能，需要将代码写在 require的第二个参数的回调函数中<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">	<span class="comment">//正确的写法</span></div><div class="line">	<span class="built_in">require</span>([<span class="string">"views/assets/jquery/jquery"</span>],<span class="function"><span class="keyword">function</span>(<span class="params">value</span>))</span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(value);</div><div class="line">	<span class="comment">//错误的写法</span></div><div class="line">	<span class="built_in">require</span>([<span class="string">"views/assets/jquery/jquery"</span>]);</div><div class="line">	<span class="comment">//因为加载是异步的,执行下面的代码console.log(value)的时候,第三方块的内容还没有加载完成,所以value是undefined;</span></div><div class="line">	<span class="built_in">console</span>.log(value);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>require.js  </p>
<h3 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h3><p>Common Module Definition 通用模块定义</p>
<p>尽可能晚的加载模块，哪里用到了模块再去加载</p>
<p>sea.js</p>
<p>##　require.js实现模块化</p>
<h3 id="定义模块"><a href="#定义模块" class="headerlink" title="定义模块"></a>定义模块</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//**依赖项是个数组**</span></div><div class="line">define([<span class="string">"当前模块的依赖项"</span>...], <span class="function"><span class="keyword">function</span>(<span class="params">使用形参接收依赖项的返回值</span>)</span>&#123;</div><div class="line">	<span class="comment">//当前模块中要实现的功能</span></div><div class="line"></div><div class="line">	<span class="comment">//当前模块如果要提供内容给模块调用者使用，就需要通过return语句将需要体用给别人的内容进行返回</span></div><div class="line"></div><div class="line">	<span class="keyword">return</span> 需要给别人提供的内容;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="引用模块"><a href="#引用模块" class="headerlink" title="引用模块"></a>引用模块</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>([<span class="string">"模块路径/模块别名"</span>...], <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//这个函数会在模块加载完成之后，被调用起来</span></div><div class="line">	<span class="comment">//如果想在模块加载完成后实现某些功能，那么代码都写到这个函数中！</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="data-main"><a href="#data-main" class="headerlink" title="data-main"></a>data-main</h3><p>在引用require.js的script标签中可以通过data-main指定一个入口文件，这个入口文件中的内容，会在reuqirejs加载完毕之后，被自动执行。</p>
<p>data-main指定的这个文件是异步加载的！所以在下面如果有使用这个文件中相关内容的代码，就不能够保证执行正常</p>
<h3 id="路径的说明"><a href="#路径的说明" class="headerlink" title="路径的说明"></a>路径的说明</h3><ol>
<li><p>如果直接使用script在html当中引入模块，那么模块的路径查找会以当前html文件作为基础。 （没有配置baseUrl，也没有data-main属性）</p>
</li>
<li><p>如果使用data-main属性，那么这时候的模块路径查找，会以入口文件所在的路径作为基础去查找（没有设置baseUrl）</p>
</li>
<li><p>如果通过require.config()配置了baseUrl，那么所有的模块的路径查找，都会以这个baseUrl做为基础！</p>
</li>
</ol>
<h3 id="require-config方法的说明"><a href="#require-config方法的说明" class="headerlink" title="require.config方法的说明"></a>require.config方法的说明</h3><p>这个方法主要用来配置requirejs相关的内容</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>.config(&#123;</div><div class="line">	<span class="comment">//配置基础路径，所有的模块查找都以这个路径为基础</span></div><div class="line">	<span class="comment">//这个路径一般情况下配置为绝对路径，并且设置为所有模块共享的路径</span></div><div class="line">	baseUrl: <span class="string">"/"</span>,</div><div class="line"></div><div class="line">	<span class="comment">//paths可以用来为单个路径设置别名，以后在使用模块的时候，直接使用别名即可，不需要再写完整的路径了</span></div><div class="line">	<span class="comment">//如果模块是一个具名模块，那么这个别名一定要和具名模块的名称一致</span></div><div class="line">	<span class="comment">//.js 不要！！！</span></div><div class="line">	paths: &#123;</div><div class="line">		<span class="string">"jquery"</span>: <span class="string">"views/assets/jquery/jqeury.min"</span></div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="如何加载第三方内容"><a href="#如何加载第三方内容" class="headerlink" title="如何加载第三方内容"></a>如何加载第三方内容</h3><h4 id="实现了模块化的第三方内容加载"><a href="#实现了模块化的第三方内容加载" class="headerlink" title="实现了模块化的第三方内容加载"></a>实现了模块化的第三方内容加载</h4><p>直接使用require，就像使用正常模块一样即可！</p>
<h4 id="未实现模块化的第三方内容加载"><a href="#未实现模块化的第三方内容加载" class="headerlink" title="未实现模块化的第三方内容加载"></a>未实现模块化的第三方内容加载</h4><ol>
<li>需要考虑该内容是否有依赖项</li>
<li><p>需要考虑该内容是否有返回值（是否要提供内容给外部使用）<br>如果有依赖项，需要通过require.config方法配置该模块的依赖项</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>.config(&#123;</div><div class="line">	<span class="attr">baseUrl</span>: <span class="string">"/"</span>,</div><div class="line">	<span class="attr">paths</span>: &#123;</div><div class="line">		<span class="string">"jquery"</span>: <span class="string">"views/assets/jquery/jqeury.min"</span>,</div><div class="line">		<span class="string">"animate"</span>: <span class="string">"animate/animate"</span></div><div class="line">	&#125;,</div><div class="line">	<span class="comment">//配置的是第三方内容的依赖项以及输出项</span></div><div class="line">	shim: &#123;</div><div class="line">		<span class="comment">//模块别名： 配置信息</span></div><div class="line">		<span class="string">"animate"</span>: &#123;</div><div class="line">			<span class="comment">//deps属性可以用来配置**依赖项是个数组**;</span></div><div class="line">			deps: [<span class="string">"jquery"</span>],</div><div class="line">			<span class="comment">//export可以配置输出项</span></div><div class="line">			<span class="comment">//输出项的内容其实就是在第三方内容中去查找和配置名称相对应的全局变量，将其值作为模块的输出值！</span></div><div class="line">			<span class="comment">//exports后边的值是个**字符串**,require函数会在第三方的块里边去寻找全局变量,然后将全局变量的值返回</span></div><div class="line">			exports: <span class="string">"animate"</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">//用require函数调用实现和未实现模块化的内容也可以使用回调函数来引用模块的返回值</span></div><div class="line"><span class="built_in">require</span>([<span class="string">"animate"</span>],<span class="function"><span class="keyword">function</span>(<span class="params">animate</span>)</span>&#123;</div><div class="line">	animate();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>如果第三方内容没有实现模块化，并且没有依赖项，也没有输出项，直接require即可！！！</p>
</li>
</ol>
<h3 id="具名模块匿名模块"><a href="#具名模块匿名模块" class="headerlink" title="具名模块匿名模块"></a>具名模块匿名模块</h3><p>具名模块有名字<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">define(<span class="string">"名字"</span>, [], <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>匿名模块没名字<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">define([], <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<!-- more -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/29/模块化的总结/" data-id="cj4ukntmz001h0soip88hchvp" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/module/">module</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/07/07/gulp的使用/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Nieuwer</strong>
      <div class="article-nav-title">
        
          gulp的使用
        
      </div>
    </a>
  
  
    <a href="/2017/06/29/具名模块和匿名模块/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ouder</strong>
      <div class="article-nav-title">具名模块和匿名模块</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categorieën</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/frontEnd/">frontEnd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/frontEnd/javascript/">javascript</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/">frontend</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/frontend/web/">web</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/frontEnd/">frontEnd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/webFront/">webFront</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/webfront/">webfront</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/frontend/">frontend</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/webFront/">webFront</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/webFront/javascript/">javascript</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/webfrant/">webfrant</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/webfrant/javascript/">javascript</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Labels</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/basic-data-type/">basic data type</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git-shell/">git shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gulp/">gulp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/live-sever/">live-sever</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/module/">module</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/moduleify/">moduleify</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oriented-object-programming/">oriented object programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plugs/">plugs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prototype/">prototype</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh协议介绍/">ssh协议介绍</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uploadify/">uploadify</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/服务器免密登录如何实现/">服务器免密登录如何实现</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/环境配置/">环境配置</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/虚拟服务器/">虚拟服务器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跨域/">跨域</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/basic-data-type/" style="font-size: 10px;">basic data type</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/git-shell/" style="font-size: 10px;">git shell</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/gulp/" style="font-size: 12px;">gulp</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jquery/" style="font-size: 10px;">jquery</a> <a href="/tags/live-sever/" style="font-size: 10px;">live-sever</a> <a href="/tags/module/" style="font-size: 12px;">module</a> <a href="/tags/moduleify/" style="font-size: 10px;">moduleify</a> <a href="/tags/npm/" style="font-size: 14px;">npm</a> <a href="/tags/oriented-object-programming/" style="font-size: 18px;">oriented object programming</a> <a href="/tags/plugs/" style="font-size: 12px;">plugs</a> <a href="/tags/prototype/" style="font-size: 16px;">prototype</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/ssh协议介绍/" style="font-size: 10px;">ssh协议介绍</a> <a href="/tags/uploadify/" style="font-size: 10px;">uploadify</a> <a href="/tags/web/" style="font-size: 12px;">web</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/服务器免密登录如何实现/" style="font-size: 10px;">服务器免密登录如何实现</a> <a href="/tags/环境配置/" style="font-size: 10px;">环境配置</a> <a href="/tags/虚拟服务器/" style="font-size: 10px;">虚拟服务器</a> <a href="/tags/跨域/" style="font-size: 10px;">跨域</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/07/07/jquery-validate/">jquery-validate</a>
          </li>
        
          <li>
            <a href="/2017/07/07/uploadify的使用总结/">uploadify的使用总结</a>
          </li>
        
          <li>
            <a href="/2017/07/07/立即执行函数表达式-数组的方法/">立即执行函数表达式/数组的方法</a>
          </li>
        
          <li>
            <a href="/2017/07/07/面向对象中的闭包/">面向对象中的闭包</a>
          </li>
        
          <li>
            <a href="/2017/07/07/递归-作用域-变量提升/">递归/作用域/变量提升</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Lilong<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>